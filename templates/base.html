{% block content %}
  <h2 class="titulo">Cadastro de Cliente</h2>
  <form action="/salvar_cadastro" method="POST" enctype="multipart/form-data" class="formulario">
    <label for="nome">Responsável:</label>
    <input type="text" name="nome" required>

    <label for="nome_fantasia">Nome da Loja:</label>
    <input type="text" name="nome_fantasia">

    <label for="cep">CEP:</label>
    <input type="text" name="cep" id="cep" maxlength="9" onblur="buscarEndereco()">

    <label for="endereco">Endereço:</label>
    <input type="text" name="endereco" id="endereco">

    <label for="telefone">Telefone:</label>
    <input type="text" name="telefone">

    <label for="whatsapp">WhatsApp:</label>
    <input type="text" name="whatsapp">

    <label for="site">Site:</label>
    <input type="text" name="site">

    <label>Produtos Trabalhados:</label><br>
    <label><input type="checkbox" name="produtos" value="Capacete"> Capacete</label>
    <label><input type="checkbox" name="produtos" value="Jaqueta"> Jaqueta</label>
    <label><input type="checkbox" name="produtos" value="Luvas"> Luvas</label>
    <label><input type="checkbox" name="produtos" value="Calça"> Calça</label>
    <label><input type="checkbox" name="produtos" value="Botas"> Botas</label>

    <label for="marcas">Marcas Trabalhadas:</label>
    <input type="text" name="marcas">

    <label for="novas_marcas">Gostaria de conhecer quais marcas?</label>
    <input type="text" name="novas_marcas">

    <label for="info_extra">Informações extras:</label>
    <textarea name="info_extra"></textarea>

    <label for="data_visita">Data da Visita:</label>
    <input type="date" name="data_visita">

    <label for="proxima_visita">Próxima Visita:</label>
    <input type="date" name="proxima_visita">

    <label for="foto1">Foto 1:</label>
    <input type="file" name="foto1" accept="image/*">

    <label for="foto2">Foto 2:</label>
    <input type="file" name="foto2" accept="image/*">

    <label for="foto3">Foto 3:</label>
    <input type="file" name="foto3" accept="image/*">

    <label for="foto4">Foto 4:</label>
    <input type="file" name="foto4" accept="image/*">

    <button type="submit">Salvar</button>
  </form>
  <div style="text-align: center; margin-top: 20px;">
    <a href="/" class="btn-voltar">⬅️ Voltar para início</a>
  </div>

  <script>
    function buscarEndereco() {
      const cep = document.getElementById('cep').value.replace(/\D/g, '');
      if (cep.length === 8) {
        fetch(`/consulta_cep/${cep}`)
          .then(response => response.json())
          .then(data => {
            document.getElementById('endereco').value = data.endereco;
          });
      }
    }
  </script>
{% endblock %}
